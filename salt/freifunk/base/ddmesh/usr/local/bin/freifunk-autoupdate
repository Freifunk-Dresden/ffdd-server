#!/usr/bin/env bash
### This file managed by Salt, do not edit by hand! ###
# check Autoupdate every day (Salt managed)
# used by: /etc/cron.d/freifunk-autoupdate.conf
install_dir="$(nvram get install_dir)"
branch="$(nvram get branch)"

if [ "$(nvram get autoupdate)" -eq 1 ]; then
	
	rm -rf "$install_dir"
	git clone https://github.com/cremesk/ffdd-server.git "$install_dir"
	cd "$install_dir"

	git checkout "$branch"
	git pull origin "$branch"

	salt-call state.highstate --local
else
	exit 0;
fi
